<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Change Password</title>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script>
    // Replace this config with your Firebase project config
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
      projectId: "YOUR_PROJECT_ID",
    };
    firebase.initializeApp(firebaseConfig);

    window.onload = () => {
      firebase.auth().onAuthStateChanged((user) => {
        if (!user) {
          // Not logged in, redirect to login page
          window.location.href = "index.html";
        }
      });
    };

    function changePassword() {
      const newPassword = document.getElementById("newPassword").value;
      const user = firebase.auth().currentUser;

      if (!user) {
        alert("No authenticated user found. Please log in first.");
        window.location.href = "index.html";
        return;
      }

      user.updatePassword(newPassword)
        .then(() => {
          alert("Password updated successfully!");
          firebase.auth().signOut().then(() => {
            window.location.href = "index.html"; // Redirect to login
          });
        })
        .catch((error) => {
          console.error("Error updating password:", error);
          alert("Failed to update password: " + error.message);
        });
    }
  </script>
</head>
<body>
  <h2>Change Your Password</h2>
  <input type="password" id="newPassword" placeholder="New Password" />
  <button onclick="changePassword()">Change Password</button>
</body>
</html>
