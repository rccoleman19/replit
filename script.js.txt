<!-- HTML should include Firebase libraries (before your script.js): -->
<script src="https://www.gstatic.com/firebasejs/10.12.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.1/firebase-firestore.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js"></script>

<script>
  // Your Firebase config:
  const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
    projectId: "YOUR_PROJECT_ID",
    storageBucket: "YOUR_PROJECT_ID.appspot.com",
    messagingSenderId: "YOUR_SENDER_ID",
    appId: "YOUR_APP_ID"
  };

  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  const db = firebase.firestore();

  document.addEventListener('DOMContentLoaded', function () {
    const calendarEl = document.getElementById('calendar');
    const calendar = new FullCalendar.Calendar(calendarEl, {
      initialView: 'dayGridMonth',
      events: []
    });

    auth.onAuthStateChanged(async (user) => {
      if (!user) {
        window.location.href = "index.html";
        return;
      }

      const bookingsSnapshot = await db.collection("bookings").get();
      const events = [];

      bookingsSnapshot.forEach(doc => {
        const data = doc.data();
        events.push({
          title: data.name || "Booked",
          start: data.date,
          allDay: true
        });
      });

      calendar.addEventSource(events);
      calendar.render();
    });
  });
</script>
